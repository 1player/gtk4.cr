#!/usr/bin/env sh

VERSION=$(crystal lib/version_from_shard/src/extract_version.cr  | cut -d\" -f2)

if [[ "$VERSION" == *"+"* ]]; then
  REF="master"
else
  REF=$VERSION
fi

echo " Gtk4.cr version: $VERSION"
echo "Source reference: $REF"
echo "crystal doc..."
crystal doc -s -p --project-name="GTK4.cr" --project-version="$VERSION" --source-refname="$REF" \
lib/gi-crystal/src/gi-crystal.cr \
lib/gi-crystal/src/auto/gtk-4.0/gtk.cr
