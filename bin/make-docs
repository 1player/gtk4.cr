#!/usr/bin/env sh

VERSION=$(cat shard.yml | grep "^version" | cut -d\   -f2)

echo "Generating documentation for Gtk4.cr version $VERSION..."

# We do this to avoid crystal doc generate links to generated files
echo " " >> LICENSE
crystal doc -s -p --project-name="GTK4.cr" --project-version="$VERSION" \
lib/gi-crystal/src/gi-crystal.cr \
lib/gi-crystal/src/auto/gtk-4.0/gtk.cr

# Put LICENSE file back
git checkout LICENSE